<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gadget Essentials PH</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
body{
margin:0;
font-family:Poppins,Segoe UI;
background:linear-gradient(135deg,#0ea5e9,#22c55e);
color:white;
transition:.4s;
}

.container{
max-width:1200px;
margin:auto;
padding:20px;
}

.products{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:20px;
margin-top:30px;
}

@media(max-width:1024px){
.products{grid-template-columns:repeat(2,1fr);}
}

@media(max-width:600px){
.products{grid-template-columns:1fr;}
}

.card{
backdrop-filter:blur(15px);
background:rgba(255,255,255,.2);
padding:15px;
border-radius:20px;
box-shadow:0 10px 30px rgba(0,0,0,.3);
transition:.3s;
}

.card:hover{
transform:translateY(-8px);
}

.card img{
width:100%;
aspect-ratio:1/1;
object-fit:cover;
border-radius:15px;
}

button{
width:100%;
padding:10px;
border:none;
border-radius:10px;
margin-top:8px;
font-weight:bold;
cursor:pointer;
}

.primary{background:#2563eb;color:white;}
.edit{background:#f59e0b;color:white;}
.delete{background:#ef4444;color:white;}

.admin-panel{
display:none;
background:white;
color:black;
padding:25px;
border-radius:20px;
margin-top:20px;
}

.login-box{
background:white;
color:black;
padding:25px;
border-radius:20px;
margin-top:20px;
}

input,textarea{
width:100%;
padding:10px;
margin-top:8px;
border-radius:8px;
border:1px solid #ccc;
}

#offlineBanner{
display:none;
background:#f59e0b;
padding:10px;
text-align:center;
font-weight:bold;
}
</style>
</head>

<body>

<div id="offlineBanner">
âš  You are viewing offline mode
</div>

<div class="container">

<h1>ðŸ›’ Gadget Essentials PH</h1>

<!-- LOGIN -->
<div class="login-box" id="adminLogin">
<h2>Admin Login</h2>
<input type="password" id="adminPassword" placeholder="Enter Password">
<button class="primary" onclick="checkPassword()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
<h2>Product Editor</h2>

<input type="hidden" id="editIndex">

<input id="pname" placeholder="Product Name">
<textarea id="pdesc" placeholder="Description"></textarea>
<input id="pprice" placeholder="Price">
<input id="pimg" placeholder="Image URL">
<input id="plink" placeholder="Shopee Link">

<button class="primary" onclick="saveProduct()">Save Product</button>

<button class="delete" onclick="logoutAdmin()">Logout</button>
</div>

<!-- PRODUCTS -->
<div class="products" id="products"></div>

</div>

<script>

/* SECURITY */
const ADMIN_PASSWORD="GEPH2026";
let isAdmin=sessionStorage.getItem("adminLogged")==="true";

/* LOGIN */
function checkPassword(){
let pass=document.getElementById("adminPassword").value;

if(pass===ADMIN_PASSWORD){
sessionStorage.setItem("adminLogged","true");
isAdmin=true;
showAdmin();
alert("âœ… Admin Access Granted");
}else{
alert("âŒ Wrong Password");
}
}

function logoutAdmin(){
sessionStorage.removeItem("adminLogged");
isAdmin=false;
hideAdmin();
}

function showAdmin(){
document.getElementById("adminLogin").style.display="none";
document.getElementById("adminPanel").style.display="block";
}

function hideAdmin(){
document.getElementById("adminLogin").style.display="block";
document.getElementById("adminPanel").style.display="none";
}

/* PRODUCTS */
let products=JSON.parse(localStorage.getItem("products"))||[];

function saveProduct(){

let name=pname.value;
let desc=pdesc.value;
let price=pprice.value;
let img=pimg.value;
let link=plink.value;
let editIndex=editIndexField.value;

if(!name||!price||!link){
alert("Fill all fields");
return;
}

if(editIndex===""){
products.push({
name,desc,price,image:img||"https://via.placeholder.com/500",link
});
}else{
products[editIndex]={name,desc,price,image:img,link};
}

localStorage.setItem("products",JSON.stringify(products));
clearForm();
renderProducts();
}

const pname=document.getElementById("pname");
const pdesc=document.getElementById("pdesc");
const pprice=document.getElementById("pprice");
const pimg=document.getElementById("pimg");
const plink=document.getElementById("plink");
const editIndexField=document.getElementById("editIndex");

function clearForm(){
pname.value="";
pdesc.value="";
pprice.value="";
pimg.value="";
plink.value="";
editIndexField.value="";
}

function editProduct(index){
let p=products[index];
editIndexField.value=index;
pname.value=p.name;
pdesc.value=p.desc;
pprice.value=p.price;
pimg.value=p.image;
plink.value=p.link;
window.scrollTo({top:0,behavior:"smooth"});
}

function deleteProduct(index){
products.splice(index,1);
localStorage.setItem("products",JSON.stringify(products));
renderProducts();
}

/* RENDER PRODUCTS */
function renderProducts(){

let container=document.getElementById("products");
container.innerHTML="";

products.forEach((p,index)=>{

let adminButtons="";

if(isAdmin){
adminButtons=`
<button class="edit" onclick="editProduct(${index})">Edit</button>
<button class="delete" onclick="deleteProduct(${index})">Delete</button>
`;
}

let card=document.createElement("div");
card.className="card";

card.innerHTML=`
<img src="${p.image}">
<h3>${p.name}</h3>
<p>${p.desc||""}</p>
<p><b>â‚±${p.price}</b></p>

<button class="primary" onclick="window.open('${p.link}','_blank')">
Buy Now
</button>

${adminButtons}
`;

container.appendChild(card);
});

gsap.from(".card",{y:30,opacity:0,stagger:0.1});
}

/* OFFLINE DETECTION */
function updateOnlineStatus(){
document.getElementById("offlineBanner").style.display =
navigator.onLine ? "none":"block";
}

window.addEventListener("load",()=>{
updateOnlineStatus();
renderProducts();

if(isAdmin) showAdmin();
else hideAdmin();
});

window.addEventListener("online",updateOnlineStatus);
window.addEventListener("offline",updateOnlineStatus);

</script>

</body>
</html>
